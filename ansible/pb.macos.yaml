---

#   ^#\s+(.*?)\ndefaults write (\S+)\s+(\S+)\s+-(\S+)\s(.*?)$
#   - domain: $2\n  key: $3\n  type: $4\n  value: $5\n  name: $1\n

#https://macos-defaults.com/
- name: MacOS Playbook
  hosts: "localhost"
  vars:
    system_macos_defaults:
    - domain: com.apple.universalaccess
      key: reduceMotion
      type: bool
      value: true
      name: Reudce motion enable to change space switching to a fade and not a swipe

    - domain: com.apple.universalaccess
      key: com.apple.custommenu.apps
      type: array
      value:
        - com.apple.finder
        - com.google.Chrome
        - com.google.Chrome.canary
        - com.apple.Safari
      name: Enable keyboard shortcut overrides for select apps

    - domain: com.apple.universalaccess
      key: HIDScrollZoomModifierMask
      type: int
      value: 262144
      name: Use scroll gesture with the Ctrl (^) modifier key to zoom

    - domain: com.apple.universalaccess
      key: closeViewScrollWheelToggle
      type: bool
      value: true
      name: Enable scroll wheel zoom

    - domain: com.apple.universalaccess
      key: closeViewZoomFollowsFocus
      type: bool
      value: true
      name: Follow the keyboard focus while zoomed in

    - domain: /Library/Preferences/com.apple.loginwindow
      key: AdminHostInfo
      type: string
      value: HostName
      name: Reveal IP address, hostname, OS version, etc. when clicking the clock in the login window

    - domain: /Library/Preferences/com.apple.windowserver
      key: DisplayResolutionEnabled
      type: bool
      value: true
      name: Enable HiDPI display modes (requires restart)
    - domain: com.apple.Safari
      key: UniversalSearchEnabled
      type: bool
      value: false
      name: Don't send search queries to Apple

    ##################################################################################
    # Safari & WebKit
    ##################################################################################

    - domain: NSGlobalDomain
      key: WebKitDeveloperExtras
      type: bool
      value: true
      name: Add a context menu item for showing the Web Inspector in web views

    - domain: com.apple.Safari
      key: WebContinuousSpellCheckingEnabled
      type: bool
      value: true
      name: Enable continuous spellchecking

    - domain: com.apple.Safari
      key: WebAutomaticSpellingCorrectionEnabled
      type: bool
      value: false
      name: Disable auto-correct

    - domain: com.apple.Safari
      key: AutoFillFromAddressBook
      type: bool
      value: false
      name: Disable AutoFill for AddressBook

    - domain: com.apple.Safari
      key: AutoFillPasswords
      type: bool
      value: false
      name: Disable Autofill for Passwords

    - domain: com.apple.Safari
      key: AutoFillCreditCardData
      type: bool
      value: false
      name: Disable AutoFill for Credit Cards

    - domain: com.apple.Safari
      key: AutoFillMiscellaneousForms
      type: bool
      value: false
      name: Disable Form Auto Fill

    - domain: com.apple.Safari
      key: WarnAboutFraudulentWebsites
      type: bool
      value: true
      name: Warn about fraudulent websites

    - domain: com.apple.Safari
      key: WebKitPluginsEnabled
      type: bool
      value: false
      name: Disable plug-ins

    - domain: com.apple.Safari
      key: com.apple.Safari.ContentPageGroupIdentifier.WebKit2PluginsEnabled
      type: bool
      value: false
      name: Disable Webkit plugins

    - domain: com.apple.Safari
      key: WebKitJavaEnabled
      type: bool
      value: false
      name: Disable Java

    - domain: com.apple.Safari
      key: com.apple.Safari.ContentPageGroupIdentifier.WebKit2JavaEnabled
      type: bool
      value: false
      name: Disable Webkit Java

    - domain: com.apple.Safari
      key: WebKitJavaScriptCanOpenWindowsAutomatically
      type: bool
      value: false
      name: Block pop-up windows

    - domain: com.apple.Safari
      key: com.apple.Safari.ContentPageGroupIdentifier.WebKit2JavaScriptCanOpenWindowsAutomatically
      type: bool
      value: false
      name: Block Webkit popup windows

    - domain: com.apple.Safari
      key: SendDoNotTrackHTTPHeader
      type: bool
      value: true
      name: Enable “Do Not Track”

    - domain: com.apple.Safari
      key: InstallExtensionUpdatesAutomatically
      type: bool
      value: true
      name: Update extensions automatically

    - domain: com.apple.Safari
      key: SuppressSearchSuggestions
      type: bool
      value: true
      name: Disable search suggestions

    - domain: com.apple.Safari
      key: WebKitTabToLinksPreferenceKey
      type: bool
      value: true
      name: Press Tab to highlight each item on a web page

    - domain: com.apple.Safari
      key: com.apple.Safari.ContentPageGroupIdentifier.WebKit2TabsToLinks
      type: bool
      value: true
      name: Enable tab to links

    - domain: com.apple.Safari
      key: ShowFullURLInSmartSearchField
      type: bool
      value: true
      name: "Show the full URL in the address bar"

    - domain: com.apple.Safari
      key: HomePage
      type: string
      value: "about:blank"
      name: Set Safari's home page to `about:blank` for faster loading

    - domain: com.apple.Safari
      key: AutoOpenSafeDownloads
      type: bool
      value: false
      name: Prevent Safari from opening 'safe' files automatically after downloading

    - domain: com.apple.Safari
      key: com.apple.Safari.ContentPageGroupIdentifier.WebKit2BackspaceKeyNavigationEnabled
      type: bool
      value: true
      name: Allow hitting the Backspace key to go to the previous page in history

    - domain: com.apple.Safari
      key: ShowFavoritesBar
      type: bool
      value: false
      name: Hide Safari's bookmarks bar by default

    - domain: com.apple.Safari
      key: ShowSidebarInTopSites
      type: bool
      value: false
      name: Hide Safari's sidebar in Top Sites

    - domain: com.apple.Safari
      key: DebugSnapshotsUpdatePolicy
      type: int
      value: 2
      name: Disable Safari's thumbnail cache for History and Top Sites

    - domain: com.apple.Safari
      key: IncludeInternalDebugMenu
      type: bool
      value: true
      name: Enable Safari's debug menu

    - domain: com.apple.Safari
      key: FindOnPageMatchesWordStartsOnly
      type: bool
      value: false
      name: Make Safari's search banners default to Contains instead of Starts With

    - domain: com.apple.Safari
      key: IncludeDevelopMenu
      type: bool
      value: true
      name: Enable the Develop menu and the Web Inspector in Safari

    - domain: com.apple.Safari
      key: WebKitDeveloperExtrasEnabledPreferenceKey
      type: bool
      value: true
      name: Enable Developer shortcut

    - domain: com.apple.Safari
      key: com.apple.Safari.ContentPageGroupIdentifier.WebKit2DeveloperExtrasEnabled
      type: bool
      value: true
      name: Enable Dev Extras
    user_macos_defaults:
    - domain: "/Library/Preferences/com.apple.AppleFileServer"
      key: guestAccess
      type: bool
      value: false
      name: "Disable guest fileshare"

    - domain: "/Library/Preferences/SystemConfiguration/com.apple.smb.server"
      key: AllowGuestAccess
      type: bool
      value: false
      name: "Disable all guest access to fileshares"

    - domain: "/Library/Preferences/com.apple.loginwindow"
      key: GuestEnabled
      type: bool
      value: false
      name: "Disable guest login"

    - domain: NSGlobalDomain
      key: NSTableViewDefaultSizeMode
      type: int
      value: 2
      name: Set sidebar icon size to medium

    - domain: NSGlobalDomain
      key: AppleShowScrollBars
      type: string
      value: "Always"
      name: Always show scrollbars
      # Possible values: `WhenScrolling`, `Automatic` and `Always`

    - domain: NSGlobalDomain
      key: NSUseAnimatedFocusRing
      type: bool
      value: false
      name: Disable the over-the-top focus ring animation


    - domain: NSGlobalDomain
      key: NSWindowResizeTime
      type: float
      value: 0.001
      name: Increase window resize speed for Cocoa applications


    - domain: NSGlobalDomain
      key: NSNavPanelExpandedStateForSaveMode
      type: bool
      value: true
      name: Expand save panel by default

    - domain: NSGlobalDomain
      key: NSNavPanelExpandedStateForSaveMode2
      type: bool
      value: true
      name: Expand saave panel by default (mode 2)

    - domain: NSGlobalDomain
      key: PMPrintingExpandedStateForPrint
      type: bool
      value: true
      name: Expand print panel by default

    - domain: NSGlobalDomain
      key: PMPrintingExpandedStateForPrint2
      type: bool
      value: true
      name: Expand print panel by default (mode 2)

    - domain: NSGlobalDomain
      key: NSDocumentSaveNewDocumentsToCloud
      type: bool
      value: false
      name: Save to disk (not to iCloud) by default

    - domain: com.apple.print.PrintingPrefs
      key: "Quit When Finished"
      type: bool
      value: true
      name: Automatically quit printer app once the print jobs complete

    - domain: com.apple.LaunchServices
      key: LSQuarantine
      type: bool
      value: false
      name: Disable the “Are you sure you want to open this application?” dialog

    - domain: NSGlobalDomain
      key: NSTextShowsControlCharacters
      type: bool
      value: true
      name: Display ASCII control characters using caret notation in standard text views
      ## Try e.g. `cd /tmp; unidecode "\x{0000}" > cc.txt; open -e cc.txt`

    - domain: com.apple.systempreferences
      key: NSQuitAlwaysKeepsWindows
      type: bool
      value: false
      name: Disable Resume system-wide

    - domain: NSGlobalDomain
      key: NSDisableAutomaticTermination
      type: bool
      value: true
      name: Disable automatic termination of inactive apps

    - domain: NSGlobalDomain
      key: NSDocumentSaveNewDocumentsToCloud
      type: bool
      value: false
      name: Saving to disk (not to iCloud) by default

    - domain: com.apple.helpviewer
      key: DevMode
      type: bool
      value: true
      name: Set Help Viewer windows to non-floating mode



    - domain: NSGlobalDomain
      key: NSAutomaticQuoteSubstitutionEnabled
      type: bool
      value: false
      name: "Disable smart quotes as they're annoying when typing code"

    - domain: NSGlobalDomain
      key: NSAutomaticDashSubstitutionEnabled
      type: bool
      value: false
      name: "Disable smart dashes as they're annoying when typing code"

    - domain: NSGlobalDomain
      key: AppleInterfaceStyle
      type: string
      value: "Dark"
      name: Dark mode

    - domain: NSGlobalDomain
      key: AppleAquaColorVariant
      type: int
      value: 5
      name: Set purple accent colour

    - domain: "NSGlobalDomain"
      key: AppleHighlightColor
      type: string
      value: "0.968627 0.831373 1.000000 Purple"
      name: "Set Highlight colors"

    - domain: com.apple.dock
      key: autohide-time-modifier
      type: float
      value: 0.1
      name: Set animation time for showing dock (fallback in case dock is shown)

    - domain: NSGlobalDomain
      key: com.apple.keyboard.fnState
      type: bool
      value: true
      name: Make function keys work like function keys by default

    - domain: NSGlobalDomain
      key: com.apple.mouse.tapBehavior
      type: int
      value: 1
      name: Mouse tap behavhor

    - domain: com.apple.driver.AppleBluetoothMultitouch.trackpad
      key: TrackpadCornerSecondaryClick
      type: int
      value: 2
      name: "Trackpad: map bottom right corner to right-click"

    - domain: com.apple.driver.AppleBluetoothMultitouch.trackpad
      key: TrackpadRightClick
      type: bool
      value: true
      name: Enable trackpad right tap-click

    - domain: NSGlobalDomain
      key: com.apple.swipescrolldirection
      type: bool
      value: false
      name: Disable “natural” (Lion-style) scrolling

    - domain: NSGlobalDomain
      key: AppleKeyboardUIMode
      type: int
      value: 3
      name: Enable full keyboard access for all controls (e.g. enable Tab in modal dialogs)

    - domain: NSGlobalDomain
      key: ApplePressAndHoldEnabled
      type: bool
      value: false
      name: Disable press-and-hold for keys in favor of key repeat

    - domain: NSGlobalDomain
      key: KeyRepeat
      type: int
      value: 1
      name: Set a blazingly fast keyboard repeat rate

    - domain: NSGlobalDomain
      key: InitialKeyRepeat
      type: int
      value: 40
      name: Set intial keyrate

    - domain: NSGlobalDomain
      key: AppleLanguages
      type: array
      value: 
        - us
        - en
      name: Set language

    - domain: NSGlobalDomain
      key: AppleLocale
      type: string
      value: "en_US@currency=USD"
      name: Set currency format

    - domain: NSGlobalDomain
      key: AppleMeasurementUnits
      type: string
      value: "Inches"
      name: Set measurement units

    - domain: NSGlobalDomain
      key: AppleMetricUnits
      type: bool
      value: false
      name: Set metrics to off =(

    - domain: NSGlobalDomain
      key: NSAutomaticSpellingCorrectionEnabled
      type: bool
      value: false
      name: Disable auto-correct

    - domain: com.apple.BezelServices
      key: kDimTime
      type: int
      value: 120
      name: Turn off keyboard illumination when computer is not used for 2 minutes

    - domain: NSGlobalDomain
      key: com.apple.trackpad.scaling
      type: float
      value: 2
      name: Setting trackpad speed to a reasonable number

    - domain: NSGlobalDomain
      key: com.apple.mouse.scaling
      type: float
      value: 2.5
      name: Set mouse speed to a reasonable number

    - domain: com.apple.driver.AppleBluetoothMultitouch.mouse
      key: MouseButtonMode
      type: string
      value: TwoButton
      name: Turn on right click support for mice

    - domain: com.apple.AppleMultitouchMouse
      key: MouseButtonMode
      type: string
      value: TwoButton
      name: Ensure two-button mode for mice (normal default)

    - domain: com.apple.driver.AppleHIDMouse
      key: Button2
      type: int
      value: 2
      name: Map right click for mouse (normal default)

    - domain: com.apple.screensaver
      key: askForPassword
      type: int
      value: 1
      name: Require password after screensaver or display sleep

    - domain: com.apple.screensaver
      key: askForPasswordDelay
      type: int
      value: 5
      name: Set ask for password interval to 5 seconds

    - domain: com.apple.screencapture
      key: location
      type: string
      value: "${HOME}/Desktop"
      name: Save screenshots to the desktop

    - domain: com.apple.screencapture
      key: type
      type: string
      value: "png"
      name: "Save screenshots in PNG format (other options: BMP, GIF, JPG, PDF, TIFF)"

    - domain: com.apple.screencapture
      key: disable-shadow
      type: bool
      value: true
      name: Disable shadow in screenshots

    - domain: NSGlobalDomain
      key: AppleFontSmoothing
      type: int
      value: 2
      name: Enable subpixel font rendering on non-Apple LCDs



    - domain: com.apple.finder
      key: DisableAllAnimations
      type: bool
      value: true
      name: disable window animations and Get Info animations

    - domain: com.apple.finder
      key: ShowExternalHardDrivesOnDesktop
      type: bool
      value: false
      name: Remove icons for external hard drives on the desktop

    - domain: com.apple.finder
      key: ShowHardDrivesOnDesktop
      type: bool
      value: false
      name: Remove icons for internal hard drives on the desktop

    - domain: com.apple.finder
      key: ShowMountedServersOnDesktop
      type: bool
      value: false
      name: Remove icons for servers on desktop

    - domain: com.apple.finder
      key: ShowRemovableMediaOnDesktop
      type: bool
      value: false
      name: Remove icons for removable media on desktop

    - domain: com.apple.finder
      key: AppleShowAllFiles
      type: bool
      value: false
      name: Hide hidden files by default

    - domain: com.apple.finder
      key: QLEnableTextSelection
      type: bool
      value: true
      name: Allowing text selection in Quick Look/Preview in Finder by default

    - domain: NSGlobalDomain
      key: AppleShowAllExtensions
      type: bool
      value: true
      name: Show all filename extensions

    - domain: com.apple.finder
      key: ShowStatusBar
      type: bool
      value: true
      name: Show status bar

    - domain: com.apple.finder
      key: ShowPathbar
      type: bool
      value: true
      name: Show path bar

    - domain: com.apple.finder
      key: _FXShowPosixPathInTitle
      type: bool
      value: true
      name: Display full POSIX path as Finder window title

    - domain: com.apple.finder
      key: _FXSortFoldersFirst
      type: bool
      value: true
      name: Keep folders on top when sorting by name

    - domain: com.apple.finder
      key: FXDefaultSearchScope
      type: string
      value: "SCcf"
      name: When performing a search, search the current folder by default

    - domain: com.apple.finder
      key: FXEnableExtensionChangeWarning
      type: bool
      value: false
      name: Disable the warning when changing a file extension

    - domain: NSGlobalDomain
      key: com.apple.springing.enabled
      type: bool
      value: true
      name: Enable spring loading for directories

    - domain: NSGlobalDomain
      key: com.apple.springing.delay
      type: float
      value: 0
      name: Remove the spring loading delay for directories

    - domain: com.apple.desktopservices
      key: DSDontWriteNetworkStores
      type: bool
      value: true
      name: Avoid creating .DS_Store files on network

    - domain: com.apple.desktopservices
      key: DSDontWriteUSBStores
      type: bool
      value: true
      name: Avoid creating .DS_Store files on USB devices

    - domain: com.apple.frameworks.diskimages
      key: skip-verify
      type: bool
      value: true
      name: Disable disk image verification

    - domain: com.apple.frameworks.diskimages
      key: skip-verify-locked
      type: bool
      value: true
      name: Disable disk verify locked

    - domain: com.apple.frameworks.diskimages
      key: skip-verify-remote
      type: bool
      value: true
      name: Disable disk verify remote

    - domain: com.apple.frameworks.diskimages
      key: auto-open-ro-root
      type: bool
      value: true
      name: Automatically open a new Finder window when a volume is mounted (RO)

    - domain: com.apple.frameworks.diskimages
      key: auto-open-rw-root
      type: bool
      value: true
      name: Automatically open a new Finder window when a volume is mounted (RW)

    - domain: com.apple.finder
      key: OpenWindowForNewRemovableDisk
      type: bool
      value: true
      name: Enable Auto Open Window for Removable Disks

    - domain: com.apple.finder
      key: FXPreferredViewStyle
      type: string
      value: "Nlsv"
      name: Use list view in all Finder windows by default
      # Four-letter codes for the other view modes: `icnv`, `clmv`, `Flwv`

    - domain: com.apple.finder
      key: WarnOnEmptyTrash
      type: bool
      value: false
      name: Disable the warning before emptying the Trash

    - domain: com.apple.NetworkBrowser
      key: BrowseAllInterfaces
      type: bool
      value: true
      name: Enable AirDrop over Ethernet and on unsupported Macs running Lion

    # ##################################################################################
    # # Dock, Dashboard, and hot corners
    # ##################################################################################

    - domain: com.apple.dock
      key: mineffect
      type: string
      value: "scale"
      name: Change minimize/maximize window effect

    - domain: com.apple.dock
      key: minimize-to-application
      type: bool
      value: true
      name: Minimize windows into their application's icon

    - domain: com.apple.dock
      key: launchanim
      type: bool
      value: false
      name: Don't animate opening applications from the Dock

    - domain: com.apple.dock
      key: persistent-apps
      type: array
      value: []
      name: Wipe all (default) app icons from the Dock

    - domain: com.apple.dock
      key: expose-animation-duration
      type: float
      value: 0.1
      name: Speed up Mission Control animations

    - domain: com.apple.dock
      key: expose-group-by-app
      type: bool
      value: true
      name: Group windows by application in Mission Control

    - domain: com.apple.dashboard
      key: mcx-disabled
      type: bool
      value: true
      name: Disable Dashboard

    - domain: com.apple.dock
      key: dashboard-in-overlay
      type: bool
      value: true
      name: Don't show Dashboard as a Space

    - domain: com.apple.dock
      key: mru-spaces
      type: bool
      value: false
      name: Don't automatically rearrange Spaces based on most recent use

    - domain: com.apple.dock
      key: showLaunchpadGestureEnabled
      type: int
      value: 0
      name: Disable the Launchpad gesture (pinch with thumb and three fingers)

    - domain: com.apple.dock
      key: wvous-tl-corner
      type: int
      value: 0
      name: Top left screen corner → no-op
      # # Hot corners
      # # Possible values:
      # #  0: no-op
      # #  2: Mission Control
      # #  3: Show application windows
      # #  4: Desktop
      # #  5: Start screen saver
      # #  6: Disable screen saver
      # #  7: Dashboard
      # # 10: Put display to sleep
      # # 11: Launchpad
      # # 12: Notification Center

    - domain: com.apple.dock
      key: wvous-tl-modifier
      type: int
      value: 0
      name: Top left screen corner (no mod)

    - domain: com.apple.dock
      key: wvous-tr-corner
      type: int
      value: 0
      name: Top right screen corner → no-op

    - domain: com.apple.dock
      key: wvous-tr-modifier
      type: int
      value: 0
      name: Top right screen corner (no mod)

    - domain: com.apple.dock
      key: wvous-bl-corner
      type: int
      value: 0
      name: Bottom left screen corner → no-op

    - domain: com.apple.dock
      key: wvous-bl-modifier
      type: int
      value: 0
      name: Bottom left screen corner (no mod)

    - domain: com.apple.dock
      key: wvous-br-corner
      type: int
      value: 0
      name: Bottom right screen corner → no-op

    - domain: com.apple.dock
      key: wvous-br-modifier
      type: int
      value: 0
      name: Bottom right screen corner (no mod)

    - domain: com.apple.dock
      key: autohide-delay
      type: float
      value: 1000
      name: Set dock autohide-delay

    - domain: com.apple.dock
      key: autohide
      type: bool
      value: true
      name: Hide the docker by default

    - domain: com.apple.dock
      key: autohide-time-modifier
      type: float
      value: 1000
      name: Set a very long time to show the dock (essentially removing it)

    - domain: com.apple.dock
      key: tilesize
      type: float
      value: 1 #tiny size
      name: Make icons on dock tiny

    - domain: com.apple.dock
      key: magnification
      type: boolean
      value: false
      name: Turn off dock magnification

    - domain: com.apple.dock
      key: contents-immutable
      type: boolean
      value: true
      name: Make dock contents immutable

    - domain: com.apple.dock
      key: static-only
      type: bool
      value: true #only show open apps
      name: Show only open apps on dock

    - domain: com.apple.dock
      key: size-immutable
      type: boolean
      value: true
      name: Make dock non-resizable

    - domain: com.apple.dock
      key: magnify-immutable
      type: boolean
      value: true
      name: Make magnify feature locked

    - domain: com.apple.dock
      key: autohide-immutable
      type: boolean
      value: true
      name: Disable ability to turn off auto hide

    - domain: com.apple.dock
      key: position-immutable
      type: boolean
      value: true
      name: Disable position setting for dock

    - domain: com.apple.dock
      key: min-effect-immutable
      type: boolean
      value: true
      name: Disable minimize effect setting for dock

    - domain: com.apple.dock
      key: min-in-place-immutable
      type: boolean
      value: true
      name: Disable min in place for dock

    - domain: com.apple.dock
      key: no-bouncing
      type: boolean
      value: true
      name: Disable bouncing effect for dock

    ##################################################################################
    # Chrome
    ##################################################################################
    - domain: com.google.Chrome
      key: AppleEnableSwipeNavigateWithScrolls
      type: bool
      value: false
      name: Disable the all too sensitive backswipe on trackpads

    - domain: com.google.Chrome
      key: AppleEnableMouseSwipeNavigateWithScrolls
      type: bool
      value: false
      name: Disable the all too sensitive backswipe on Magic Mouse

    - domain: com.google.Chrome
      key: DisablePrintPreview
      type: bool
      value: true
      name: Use the system-native print preview dialog

    - domain: com.google.Chrome
      key: PMPrintingExpandedStateForPrint2
      type: bool
      value: true
      name: Expand the print dialog by default

    ###############################################################################
    # Photos                                                                      #
    ###############################################################################

    - domain: com.apple.ImageCapture
      key: disableHotPlug
      type: bool
      value: true
      name: Prevent Photos from opening automatically when devices are plugged in

    ###############################################################################
    # Time Machine                                                                #
    ###############################################################################

    - domain: com.apple.TimeMachine
      key: DoNotOfferNewDisksForBackup
      type: bool
      value: true
      name: Prevent Time Machine from prompting to use new hard drives as backup volume

    ###############################################################################
    # Activity Monitor                                                            #
    ###############################################################################

    - domain: com.apple.ActivityMonitor
      key: OpenMainWindow
      type: bool
      value: true
      name: Show the main window when launching Activity Monitor

    - domain: com.apple.ActivityMonitor
      key: ShowCategory
      type: int
      value: 0
      name: Show all processes in Activity Monitor

    - domain: com.apple.ActivityMonitor
      key: SortColumn
      type: string
      value: "CPUUsage"
      name: Sort Activity Monitor results by CPU usage

    ###############################################################################
    # TextEdit and Disk Utility
    ###############################################################################

    - domain: com.apple.TextEdit
      key: RichText
      type: int
      value: 0
      name: Use plain text mode for new TextEdit documents

    - domain: com.apple.TextEdit
      key: PlainTextEncoding
      type: int
      value: 4
      name: Open and save files as UTF-8 in TextEdit

    - domain: com.apple.TextEdit
      key: PlainTextEncodingForWrite
      type: int
      value: 4
      name: Set default textedit encoding

    - domain: com.apple.DiskUtility
      key: DUDebugMenuEnabled
      type: bool
      value: true
      name: Enable the debug menu in Disk Utility

    - domain: com.apple.DiskUtility
      key: advanced-image-options
      type: bool
      value: true
      name: Enable advanced image options in Disk Utility



  tasks:
    - name: "Set macOS default settings (privlaged)"
      community.general.osx_defaults:
        domain: "{{ item['domain'] }}"
        key: "{{ item['key'] }}"
        type: "{{ item['type'] }}"
        value: "{{ item['value'] }}"
      loop: "{{ system_macos_defaults }}"
      loop_control:
        label: "{{ item['name'] }}"
      become: true
      #notify: Restart macOS dock
    - name: "Set macOS default settings (user)"
      community.general.osx_defaults:
        domain: "{{ item['domain'] }}"
        key: "{{ item['key'] }}"
        type: "{{ item['type'] }}"
        value: "{{ item['value'] }}"
      loop: "{{ user_macos_defaults }}"
      loop_control:
        label: "{{ item['name'] }}"
      become: false
      #notify: Restart macOS dock